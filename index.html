<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dolar Hoje</title>
    <link rel="shortcut icon" href="./img/dolar.png" type="image/x-icon">
</head>
<link rel="stylesheet" href="./module/glide.core.css">
<style>
    @import url('https://fonts.googleapis.com/css2?family=Rubik+Pixels&family=Ubuntu:wght@400;500&display=swap');

    ::-webkit-scrollbar {
        width: 1px;
    }

    /* font-family: 'Ubuntu', sans-serif; */
    * {
        padding: 0px;
        margin: 0px;
        font-family: 'Ubuntu', sans-serif;
    }

    body {
        width: 100vw;
        height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        overflow-x: hidden;

    }
</style>

<body>
    <div class="box-conversao" style="width: 90%; max-width: 650px; height: 100vh;">
        <!-- aqui vai o carrosel kk -->
        <div id="navMoedas" class="glider" style="display: flex; overflow-x: auto; overflow-wrap:normal;">

            <!-- <div class="moeda"
                style=" border: 1px solid #efecec; margin: 5px;  cursor: pointer; display: flex; justify-content: start; align-items: center; min-width: 100px; border-radius: 3px; padding: 3px;">
                <div class="boximg" style="justify-content: center; align-items: center; display: flex;">
                    <img src="./icon-moedas/rublo.png" alt="" style="height: 20px;">
                </div>
                <div class="box-sigla" style="margin-left: 5px;">
                    <p style="font-size: 10px; font-weight: bold;">RUB R$ 6,15</p>
                </div>
            </div>
            <div class="moeda"
                style=" border: 1px solid #efecec; margin: 5px;  cursor: pointer; display: flex; justify-content: start; align-items: center; min-width: 100px; border-radius: 3px; padding: 3px;">
                <div class="boximg" style="justify-content: center; align-items: center; display: flex;">
                    <img src="./icon-moedas/rublo.png" alt="" style="height: 20px;">
                </div>
                <div class="box-sigla" style="margin-left: 5px;">
                    <p style="font-size: 10px; font-weight: bold;">RUB R$ 6,15</p>
                </div>
            </div>
            <div class="moeda"
                style=" border: 1px solid #efecec; margin: 5px;  cursor: pointer; display: flex; justify-content: start; align-items: center; min-width: 100px; border-radius: 3px; padding: 3px;">
                <div class="boximg" style="justify-content: center; align-items: center; display: flex;">
                    <img src="./icon-moedas/rublo.png" alt="" style="height: 20px;">
                </div>
                <div class="box-sigla" style="margin-left: 5px;">
                    <p style="font-size: 10px; font-weight: bold;">RUB R$ 6,15</p>
                </div>
            </div>
            <div class="moeda"
                style=" border: 1px solid #efecec; margin: 5px;  cursor: pointer; display: flex; justify-content: start; align-items: center; min-width: 100px; border-radius: 3px; padding: 3px;">
                <div class="boximg" style="justify-content: center; align-items: center; display: flex;">
                    <img src="./icon-moedas/rublo.png" alt="" style="height: 20px;">
                </div>
                <div class="box-sigla" style="margin-left: 5px;">
                    <p style="font-size: 10px; font-weight: bold;">RUB R$ 6,15</p>
                </div>
            </div>
            <div class="moeda"
                style=" border: 1px solid #efecec; margin: 5px;  cursor: pointer; display: flex; justify-content: start; align-items: center; min-width: 100px; border-radius: 3px; padding: 3px;">
                <div class="boximg" style="justify-content: center; align-items: center; display: flex;">
                    <img src="./icon-moedas/rublo.png" alt="" style="height: 20px;">
                </div>
                <div class="box-sigla" style="margin-left: 5px;">
                    <p style="font-size: 10px; font-weight: bold;">RUB R$ 6,15</p>
                </div>
            </div>
            <div class="moeda"
                style=" border: 1px solid #efecec; margin: 5px;  cursor: pointer; display: flex; justify-content: start; align-items: center; min-width: 100px; border-radius: 3px; padding: 3px;">
                <div class="boximg" style="justify-content: center; align-items: center; display: flex;">
                    <img src="./icon-moedas/rublo.png" alt="" style="height: 20px;">
                </div>
                <div class="box-sigla" style="margin-left: 5px;">
                    <p style="font-size: 10px; font-weight: bold;">RUB R$ 6,15</p>
                </div>
            </div> -->
        </div>

        <div class="box-logo-moeda"
            style=" width: 100%; display: flex; justify-content: center; align-items: center; margin-top: 50px;">
            <img id="fotoDaMoeda" src="./img/dolar.png" style="height: 130px; border-radius: 50%;" title="Nome da Moeda">
        </div>
        <div class="box-valores"
            style="display: flex; flex-direction: column; justify-content: center; align-items: center; margin-top: 25px;">
            <div class="box-input-moeda"
                style="width: 100%; justify-content: center; align-items: center; display: flex; position: relative;">
                <label for="" id="labelDaMoeda"
                    style="background-color: #fff; position: absolute; top: 0px; left: 25px; padding-left: 10px; padding-right: 10px; color: #333; font-weight: bold;">
                    USD
                </label>
                <input id="moeda1" type="text" placeholder="insira um valor" value="1.00"
                    style="height: 38px; width: 100%; margin: 10px; border: 1px solid #333; 
                padding: 10px; font-size: 24px; outline: 0px none; border-radius: 3px; color: #333; text-align: end; font-weight: bold;">
            </div>
            <!-- aqui abaixo sempre vai ser o real -->
            <div class="box-input-real"
                style="width: 100%; justify-content: center; align-items: center; display: flex; position: relative;">
                <label for=""
                    style="background-color: #fff; position: absolute; top: 0px; left: 25px; padding-left: 10px; padding-right: 10px; color: #333; font-weight: bold;">
                    BRL
                </label>
                <input id="moeda2" type="text" placeholder="" value="..."
                    style="height: 38px; width: 100%; margin: 10px; border: 1px solid #333; 
                padding: 10px; font-size: 24px; outline: 0px none; border-radius: 3px; color: #333; text-align: end; font-weight: bold;">

            </div>
        </div>


        <div class="box-recebacontacao" style="border: 1px solid #efecec; height: auto; border-radius: 3px; margin: 10px; margin-top: 50px;
                     position: relative; display: flex; flex-direction: column; padding: 10px; font-size: 12px;">
            <label for=""
                style="background-color: #fff; position: absolute; top: -15px; right: 15px; padding-left: 10px; padding-right: 10px; color: #333; font-weight: bold; font-size: 16px;">
                Receba Cotações :
            </label>

            <div class="box-redes-socialis" style="display: flex;">
                <div class="redesocial"
                    style="width: 35px; height: 35px; display: flex; justify-content: center; align-items: center; cursor: pointer;"
                    title="Telegram">
                    <img src="./img/telegram.png" alt="" style="height: 30px;">
                </div>
                <div class="redesocial"
                    style="width: 35px; height: 35px; display: flex; justify-content: center; align-items: center; cursor: pointer;"
                    title="WhatsApp">
                    <img src="./img/whats.png" alt="" style="height: 30px;">
                </div>
            </div>


        </div>



        <div class="box-resumo" style="border: 1px solid #efecec; height: auto; border-radius: 3px; margin: 10px; margin-top: 30px;
                     position: relative; display: flex; flex-direction: column; padding: 30px; font-size: 12px;">
            <label for=""
                style="background-color: #fff; position: absolute; top: -15px; right: 15px; padding-left: 10px; padding-right: 10px; color: #333; font-weight: bold; font-size: 16px;">
                Sobre:
            </label>
            <br>
            <h1 style="font-size: 18px;">O Dólar Americano (USD)</h1>
            <br>
            <p>O dólar americano (USD) é a moeda oficial dos Estados Unidos e uma das principais moedas de reserva
                global. Emitido pela Reserva Federal dos EUA, o dólar desempenha um papel fundamental nos mercados
                financeiros internacionais e no comércio internacional. Sua sigla é USD, e é comumente representado pelo
                símbolo "$". O valor do dólar é influenciado por diversos fatores, incluindo taxas de juros, condições
                econômicas dos EUA, políticas governamentais e eventos globais.</p>

            <br>

            <p>Além de ser a moeda oficial nos Estados Unidos, o dólar é amplamente aceito em transações internacionais
                e é utilizado como a principal moeda de reserva em muitos países. Isso significa que muitas nações
                mantêm reservas significativas em dólares para garantir estabilidade financeira e facilitar o comércio
                internacional.</p>
            <br>
            <p>O dólar também é conhecido por sua divisão em centavos, com moedas de 1 centavo (penny), 5 centavos
                (nickel), 10 centavos (dime), 25 centavos (quarter) e notas de diversos valores, incluindo 1, 5, 10, 20,
                50 e 100 dólares.</p>
            <br>
            <p>A taxa de câmbio do dólar em relação a outras moedas é uma medida importante, influenciando os preços de
                bens e serviços globais, bem como o desempenho econômico de diferentes países. Movimentos no mercado de
                câmbio podem ser impactados por eventos geopolíticos, indicadores econômicos e decisões de política
                monetária.</p>

        </div>


        <div class="box-link-outras-moedas" style="border: 1px solid #efecec; height: auto; border-radius: 3px; margin: 10px; margin-top: 30px;
        position: relative; display: flex; flex-direction: column; padding: 10px; padding-top: 30px; font-size: 12px;">
            <label for=""
                style="background-color: #fff; position: absolute; top: -15px; right: 15px; padding-left: 10px; padding-right: 10px; color: #333; font-weight: bold; font-size: 16px;">
                Outras Moedas:
            </label>

            <div id="renderoutrasmoedas" class="box-render-moedas" style="display: flex; flex-wrap: wrap; justify-content: center;">

                <!-- <div class="moeda"
                    style=" border: 1px solid #efecec; margin: 5px; cursor: pointer; display: flex; justify-content: start; align-items: center; width: 100px; border-radius: 3px; padding: 3px;">
                    <div class="boximg">
                        <img src="./icon-moedas/BTC.png" alt="" style="height: 30px;">
                    </div>
                    <div class="box-sigla" style="margin-left: 5px;">
                        <p>BITCOIN</p>
                    </div>
                </div>

                <div class="moeda"
                    style=" border: 1px solid #efecec; margin: 5px;  cursor: pointer; display: flex; justify-content: start; align-items: center; width: 100px; border-radius: 3px; padding: 3px;">
                    <div class="boximg">
                        <img src="./icon-moedas/ETH.png" alt="" style="height: 30px;">
                    </div>
                    <div class="box-sigla" style="margin-left: 5px;">
                        <p>ETHEREUM</p>
                    </div>
                </div>


                <div class="moeda"
                    style=" border: 1px solid #efecec; margin: 5px;  cursor: pointer; display: flex; justify-content: start; align-items: center; width: 100px; border-radius: 3px; padding: 3px;">
                    <div class="boximg">
                        <img src="./icon-moedas/LTC.png" alt="" style="height: 30px;">
                    </div>
                    <div class="box-sigla" style="margin-left: 5px;">
                        <p>LIGTH COIN</p>
                    </div>
                </div> -->
            </div>

        </div>

        <!--  -->
        <!-- 
        <div class="box-me" style=" width: 100%; margin-top: 90px; filter: grayscale(1); border-bottom: none;
         border-radius: 5px 5px 0 0; padding-top: 5px; padding-bottom: 5px; position: absolute; bottom: 10px;">
            <a target="_blank" href="https://github.com/brcaraujo"
                style="text-decoration: none; display: flex; justify-content: center; align-items: center;">
                <img src="./img/icone-github-grise.png" alt=""
                    style="height: 20px; border-radius: 50%; margin-top: 2px;">
                <p style="font-size: 13px; text-decoration: none; margin-left: 5px; color:#999;">
                    Bruno o Dev &#128126;</p>
            </a>
        </div> -->

<!-- 
        <div class="var-bird" style="position: absolute;">
            <img src="./img/down.png" alt="" style="height: 10px; animation: updown 0.1s infinite;">
            <style>
                @keyframes updown {
                    0% {
                        transform: scale(1.3);
                    }

                    100% {
                        transform: scale(1.0);
                    }
                }
            </style>
        </div> -->

    </div>
</body>


<script>
    //aqui pego o hash para usar com minhas chamadas ajax..
    let urlHash = window.location.hash.replace('#', '');
    if (urlHash == "") {
        urlHash = 'USD';
        window.location.href = './#USD';
    }

    console.log(urlHash);

    let navMoedas = document.getElementById('navMoedas');
    let renderoutrasmoedas =document.getElementById('renderoutrasmoedas');

    let inputMoeda1 = document.getElementById('moeda1');
    let inputMoeda2 = document.getElementById('moeda2');


    inputMoeda1.addEventListener('input', () => {
        if (inputMoeda1.value == "") {
            atualizaValores(1);
            inputMoeda1.value = "";
            return;
        }
        atualizaValores(inputMoeda1.value, urlHash);
    })


    function atualizaValores(reais, moedaEX) {
        let ajax = new XMLHttpRequest();
        ajax.open('GET', `https://economia.awesomeapi.com.br/last/${moedaEX}-BRL`);
        ajax.onreadystatechange = () => {
            if (ajax.readyState == 4 && ajax.status == 200) {
                let resposta = JSON.parse(ajax.response);
                let totalMoedaExtrangeira = parseFloat(reais) * resposta[moedaEX + 'BRL'].ask;
                inputMoeda2.value = totalMoedaExtrangeira.toFixed(2);
            }
        }
        ajax.send();
    }

    atualizaValores(1, urlHash);




    function atualizaValoresNav() {
        let ajax = new XMLHttpRequest();
        ajax.open('GET', 'https://economia.awesomeapi.com.br/json/last/USD-BRL,EUR-BRL,CHF-BRL,RUB-BRL,BTC-BRL,ETH-BRL,LTC-BRL,XRP-BRL');
        ajax.onreadystatechange = () => {
            if (ajax.readyState == 4 && ajax.status == 200) {
                let resposta = JSON.parse(ajax.response);
                console.log(resposta);
                Object.keys(resposta).forEach((key) => {
                    console.log(resposta[key].code);

                    navMoedas.innerHTML += templateMoeda(resposta[key].code, resposta[key].ask, resposta[key].code, resposta[key].varBid, resposta[key].pctChange, resposta[key].name);
                    renderoutrasmoedas.innerHTML += templateMoeda(resposta[key].code, resposta[key].ask, resposta[key].code, resposta[key].varBid,resposta[key].pctChange, resposta[key].name);
                });
            }
        }
        ajax.send();
    }
    atualizaValoresNav();



    function templateMoeda(img, valor, sigla, updown, pctChange, name) {
        return (`
                <div title="${name}" onclick="window.location='./#${sigla}', window.location.reload()" class="moeda"
                    style=" border: 1px solid #efecec; margin: 5px;  cursor: pointer; display: flex; justify-content: start; align-items: center; min-width: 120px; border-radius: 3px; padding: 3px; position: relative;">
                    <p style="font-size: 8px; position: absolute; top: 5px; right: 5px; color: ${updown >0 ? "#3A9811": "red"}"> ${pctChange} %</p>
                    <div class="var-bird" style="position: absolute; bottom: 5px; right: 4px">
                        <img src="./img/${updown >0 ? "up.png": "down.png"}" alt="" style="height: 6px; animation: updown 1s infinite;">
                        <style>
                            @keyframes updown {
                                0%{
                                    transform: scale(1.2);
                                }
                                100%{
                                    transform: scale(1.1);
                                }
                            }
                        </style>
                    </div>

                    <div class="boximg" style="justify-content: center; align-items: center; display: flex;">
                        <img src="./icon-moedas/${img}.png" alt="" style="height: 35px;">
                    </div>
                    <div class="box-sigla" style="margin-left: 5px;">
                        <p style="font-size: 12px; font-weight: bold;">${sigla}</p>
                        <p style="font-size: 12px; color:${updown >0 ? "#3A9811": "red"}"> R$ ${valor}</p>
                    </div>
                </div>
        `);
    }



    function loadPageHashMoeda(sigla) {
        let fotoDaMoeda = document.getElementById('fotoDaMoeda');
        let labelDaMoeda = document.getElementById('labelDaMoeda');
        fotoDaMoeda.setAttribute('src', './icon-moedas/' + sigla + '.png');
        labelDaMoeda.innerText = sigla;
    }
    window.addEventListener('load', loadPageHashMoeda(urlHash));











</script>

</html>